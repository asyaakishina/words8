<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Word Quest: Final Events</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f062c, #3d0a9b, #0e1b4d);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      color: white;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      width: 90%;
      max-width: 800px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      text-align: center;
      color: white;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }

    .question {
      font-size: 1.5rem;
      margin: 20px 0;
      font-weight: 600;
    }

    .options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 20px 0;
    }

    .option {
      padding: 15px;
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1.1rem;
      text-align: center;
    }

    .option:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.02);
    }

    .option.correct {
      background: rgba(100, 255, 100, 0.5);
      border-color: green;
    }

    .option.incorrect {
      background: rgba(255, 100, 100, 0.5);
      border-color: red;
    }

    .result {
      margin-top: 20px;
      font-size: 1.5rem;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.5s;
    }

    .result.show {
      opacity: 1;
    }

    .stats {
      margin-top: 30px;
      font-size: 1.3rem;
      line-height: 1.8;
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 15px;
      display: none;
    }

    .stats.show {
      display: block;
      animation: fadeIn 0.8s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    button {
      margin-top: 20px;
      padding: 12px 25px;
      background: #ff6b6b;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: 0.3s;
    }

    button:hover {
      background: #ff5252;
    }

    .progress {
      margin: 20px 0;
      font-size: 1rem;
    }

    .final-message {
      font-size: 1.6rem;
      font-weight: bold;
      margin: 20px 0;
      color: #ffd700;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>üéØ Word Quest: Final Events</h1>
  <div class="progress">–í–æ–ø—Ä–æ—Å: <span id="current"></span> / <span id="total"></span></div>
  <div class="question" id="question"></div>
  <div class="options" id="options"></div>
  <div class="result" id="result"></div>
  <div class="final-message" id="final-message"></div>
  <div class="stats" id="stats"></div>
  <button id="next-btn" onclick="nextQuestion()">–î–∞–ª–µ–µ</button>
  <button id="restart-btn" style="display:none;" onclick="location.reload()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
</div>

<script>
  // –í—Å–µ —Å–ª–æ–≤–∞ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–ª–æ–∫–∞ ‚Äî –ø–æ –ø–æ—Ä—è–¥–∫—É
  const words = [
    { en: "senior year", ru: "–≤—ã–ø—É—Å–∫–Ω–æ–π –≥–æ–¥ –≤ —à–∫–æ–ª–µ" },
    { en: "shock", ru: "–≤–æ–∑–º—É—â–∞—Ç—å, —à–æ–∫–∏—Ä–æ–≤–∞—Ç—å" },
    { en: "sing a carol", ru: "—Å–ø–µ—Ç—å —Ä–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏–π –≥–∏–º–Ω" },
    { en: "specific", ru: "–æ—Å–æ–±–µ–Ω–Ω—ã–π" },
    { en: "streamer", ru: "—Å–µ—Ä–ø–∞–Ω—Ç–∏–Ω" },
    { en: "strict", ru: "—Å—Ç—Ä–æ–≥–∏–π, —Å—É—Ä–æ–≤—ã–π" },
    { en: "surprise party", ru: "–≤–µ—á–µ—Ä–∏–Ω–∫–∞-—Å—é—Ä–ø—Ä–∏–∑" },
    { en: "surprised", ru: "—É–¥–∏–≤–ª–µ–Ω–Ω—ã–π" },
    { en: "take pictures", ru: "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å" },
    { en: "teenage", ru: "–ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤—ã–π" },
    { en: "theme", ru: "—Ç–µ–º–∞" },
    { en: "thrilled", ru: "–≤–∑–≤–æ–ª–Ω–æ–≤–∞–Ω–Ω—ã–π" },
    { en: "throw", ru: "–¥–∞–≤–∞—Ç—å, —É—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å (–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ)" },
    { en: "unique", ru: "—É–Ω–∏–∫–∞–ª—å–Ω—ã–π" },
    { en: "wear a mask", ru: "–Ω–æ—Å–∏—Ç—å –º–∞—Å–∫—É" },
    { en: "wedding reception", ru: "–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ —Å–≤–∞–¥—å–±—ã (–ø–æ—Å–ª–µ –±–µ–Ω–∫–µ—Ç–∞)" },
    { en: "witch", ru: "–∫–æ–ª–¥—É–Ω—å—è, –≤–µ–¥—å–º–∞" },
    { en: "zoo", ru: "–∑–æ–æ–ø–∞—Ä–∫" }
  ];

  let currentQuestionIndex = 0;
  let score = 0;
  let selectedOption = null;

  // –ü–æ–ª—É—á–∞–µ–º 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞ (–±–µ–∑ —Ä–∞–Ω–¥–æ–º–∞)
  function getWrongAnswers(correctAnswer) {
    const allWrong = words.map(word => word.ru).filter(meaning => meaning !== correctAnswer);
    const startIndex = (currentQuestionIndex * 3) % allWrong.length;
    const wrongAnswers = [];
    for (let i = 0; i < 3; i++) {
      wrongAnswers.push(allWrong[(startIndex + i) % allWrong.length]);
    }
    return wrongAnswers;
  }

  function showQuestion() {
    const question = words[currentQuestionIndex];
    document.getElementById("question").textContent = `"${question.en}"`;
    const optionsContainer = document.getElementById("options");
    optionsContainer.innerHTML = "";

    const wrongAnswers = getWrongAnswers(question.ru);
    const correctPosition = currentQuestionIndex % 4; // –ü–æ–∑–∏—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞: 0, 1, 2, 3

    const finalOptions = Array(4).fill(null);
    finalOptions[correctPosition] = question.ru;

    let wrongIndex = 0;
    for (let i = 0; i < 4; i++) {
      if (finalOptions[i] === null) {
        finalOptions[i] = wrongAnswers[wrongIndex++];
      }
    }

    finalOptions.forEach(option => {
      const div = document.createElement("div");
      div.classList.add("option");
      div.textContent = option;
      div.onclick = () => selectOption(div, option, question.ru);
      optionsContainer.appendChild(div);
    });

    document.getElementById("current").textContent = currentQuestionIndex + 1;
    document.getElementById("total").textContent = words.length;
    document.getElementById("result").classList.remove("show");
    document.getElementById("result").textContent = "";
    document.getElementById("final-message").textContent = "";
  }

  function selectOption(element, answer, correctAnswer) {
    if (selectedOption) return;

    selectedOption = element;

    const resultElement = document.getElementById("result");

    if (answer === correctAnswer) {
      element.classList.add("correct");
      resultElement.textContent = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
      score++;
    } else {
      element.classList.add("incorrect");
      resultElement.textContent = `‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–æ: "${correctAnswer}"`;
    }

    resultElement.classList.add("show");
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < words.length) {
      selectedOption = null;
      showQuestion();
    } else {
      showFinalStats();
    }
  }

  function showFinalStats() {
    const total = words.length;
    const correct = score;
    const incorrect = total - correct;
    const percent = Math.round((correct / total) * 100);

    let message = "";
    if (percent === 100) message = "üî• –ê–±—Å–æ–ª—é—Ç–Ω—ã–π —á–µ–º–ø–∏–æ–Ω! –¢—ã ‚Äî –º–∞—Å—Ç–µ—Ä —Å–ª–æ–≤!";
    else if (percent >= 80) message = "üéâ –û—Ç–ª–∏—á–Ω–æ! –¢—ã –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–∏–ª—Å—è!";
    else if (percent >= 60) message = "üëç –•–æ—Ä–æ—à–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!";
    else message = "üí™ –ù–µ —Å–¥–∞–≤–∞–π—Å—è! –ü–æ–≤—Ç–æ—Ä–∏ –∏ —Å—Ç–∞–Ω–µ—à—å —Å–∏–ª—å–Ω–µ–µ!";

    document.getElementById("final-message").textContent = message;

    const stats = document.getElementById("stats");
    stats.innerHTML = `
      <p>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong>${correct}</strong></p>
      <p>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong>${incorrect}</strong></p>
      <p>üìä –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: <strong>${percent}%</strong></p>
      <p>üéØ –í—Å–µ–≥–æ —Å–ª–æ–≤: <strong>${total}</strong></p>
    `;
    stats.classList.add("show");

    document.getElementById("next-btn").style.display = "none";
    document.getElementById("restart-btn").style.display = "inline-block";
  }

  window.onload = () => {
    showQuestion();
  };
</script>

</body>

</html>
